<header class="header-glass fixed top-4 left-4 right-4 mx-auto max-w-7xl rounded-xl shadow-md z-50 border border-gray-250 p-4 bg-gray-50/90 backdrop-blur-sm">
    <link rel="stylesheet" href="{{ url_for('static', path='css/header.css') }}">
    <div class="flex items-center justify-between">

        <!-- Логотип -->
        <a href="/" class="flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
            </svg>
            <h1 class="text-2xl font-bold gradient-text">Cleverly</h1>
        </a>

        <!-- Правая часть: иконка поиска + профиль/вход -->
        <div class="flex items-center space-x-4">

            <!-- Иконка лупы -->
            <button id="search-toggle" class="text-gray-600 hover:text-indigo-600 focus:outline-none transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            </button>

            <!-- Пользователь / Вход -->
            {% if user %}
                <a href="/profile/{{ user.telegram_id }}" class="flex items-center space-x-2">
                    <div class="h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center">
                        <span class="text-indigo-600 font-medium">{{ user.username|first|upper }}</span>
                    </div>
                </a>
                <a href="/logout" class="px-4 py-2 bg-red-100 hover:bg-red-200 text-red-600 hover:text-red-800 transition-all duration-200 rounded-lg flex items-center group">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                    Выход
                </a>
            {% else %}
                <script async src="https://telegram.org/js/telegram-widget.js?22"
                    data-telegram-login="{{ bot_username }}"
                    data-size="large"
                    data-userpic="false"
                    data-auth-url="/auth/telegram"
                    data-request-access="write">
                </script>
            {% endif %}
        </div>
    </div>

    <!-- Скрытое поле поиска (появляется при клике на лупу) -->
    <div id="search-panel" class="mt-4 hidden transition-all duration-200 ease-in-out">
        <input
            type="text"
            id="search-input"
            placeholder="Введите запрос для поиска вопросов..."
            class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white/80 backdrop-blur-sm"
            autocomplete="off"
        />

        <ul id="search-results"
            class="mt-2 bg-white/95 backdrop-blur-sm rounded-lg shadow-lg border border-gray-200 max-h-60 overflow-y-auto z-50">
        </ul>
    </div>

    <script src="{{ url_for('static', path='js/header.js') }}"></script>
</header>
